@model (string displayName, string sortParam, string? currentSort, string? currentFilter)

@{
    var sortParam = Model.sortParam;
    var currentSort = Model.currentSort ?? "";
    var isDesc = currentSort.EndsWith("_desc");
    var isCurrent = currentSort == sortParam || currentSort == sortParam + "_desc";
    string nextSort;

    if (!isCurrent)
    {
        nextSort = sortParam;
    }
    else
    {
        nextSort = isDesc ? sortParam : sortParam + "_desc";
    }

    var arrow = "";
    if (isCurrent)
    {
        arrow = isDesc ? " ▼" : " ▲";
    }
    var currentFilter = Model.currentFilter ?? "";
}

<a asp-action="Index" asp-route-sortOrder="@nextSort" asp-route-searchString="@currentFilter">
    @Model.displayName @arrow
</a>
